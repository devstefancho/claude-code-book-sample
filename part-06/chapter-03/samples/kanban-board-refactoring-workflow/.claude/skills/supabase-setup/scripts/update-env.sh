#!/bin/bash
# Update .env.local with Supabase credentials
# Usage: ./update-env.sh <supabase_url> <supabase_anon_key>

set -e

SUPABASE_URL="$1"
SUPABASE_ANON_KEY="$2"
ENV_FILE=".env.local"

if [ -z "$SUPABASE_URL" ] || [ -z "$SUPABASE_ANON_KEY" ]; then
  echo "Usage: $0 <supabase_url> <supabase_anon_key>" >&2
  echo "" >&2
  echo "Example:" >&2
  echo "  $0 'https://abc123.supabase.co' 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'" >&2
  exit 1
fi

# Create or update .env.local
cat > "$ENV_FILE" << EOF
# Supabase Configuration
# Generated by supabase-setup skill
NEXT_PUBLIC_SUPABASE_URL=$SUPABASE_URL
NEXT_PUBLIC_SUPABASE_ANON_KEY=$SUPABASE_ANON_KEY
EOF

echo "Updated $ENV_FILE successfully"
echo ""
echo "Contents:"
cat "$ENV_FILE"
